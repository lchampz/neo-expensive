var v=Object.defineProperty,F=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var g=(r,e,s)=>e in r?v(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s,x=(r,e)=>{for(var s in e||(e={}))M.call(e,s)&&g(r,s,e[s]);if(P)for(var s of P(e))R.call(e,s)&&g(r,s,e[s]);return r},C=(r,e)=>F(r,I(e));import{u as j,n as E,r as n}from"./vendor.e0ff885f.js";import{a as S,c as N,d as q}from"./index.esm.fee02a3b.js";import{i as B,I as b}from"./index.493e4434.js";import{B as J}from"./index.3eb9a112.js";import{j as d,a}from"./index.87e482b8.js";function G(){const r=j(),[e]=E(),s=e.get("email"),i=n.exports.useRef(null),[k,m]=n.exports.useState(!0),[p,f]=n.exports.useState(!1),h=n.exports.useCallback(w=>{var o;const{password:l,confirmPassword:t}=(o=i.current)==null?void 0:o.getData(),c=l===t;if(!l||!t){m(!0);return}if(c){f(!0);return}m(!1),f(!1)},[]),y=n.exports.useCallback(({password:w,confirmPassword:l})=>{var o;const t=JSON.parse(localStorage.getItem("@neo:user")||"[]"),c=t.find(u=>u.email===s);if(!c){(o=i.current)==null||o.setFieldError("password","Could not find a user.");return}localStorage.setItem("@neo:user",JSON.stringify([...t.filter(u=>u.email!==s),C(x({},c),{password:w})])),r("/")},[s,r]);return d("div",{children:[s,a("h1",{children:"set a new password"}),d(B,{ref:i,onSubmit:y,children:[a(b,{required:!0,name:"password",label:"Password",placeholder:"**************",icon:a(S,{}),onChange:h}),a(b,{required:!0,name:"confirmPassword",label:"Confirm your password",placeholder:"**************",icon:a(S,{}),onChange:h}),p?k?null:d("span",{children:["the password match ",a(N,{})]}):d("span",{children:["the password do not match ",a(q,{})]}),a(J,{disabled:!p,type:"submit",children:"Create new password"})]})]})}export{G as default};
